Загрузка csv-файлов
===================

В репозитории содержится код создания страницы для загрузки csv-файлов в БД с использованием очереди задач [Celery](http://www.celeryproject.org).
В приложении использутся компоненты:
    1. Веб-фреймворк - Flask.
    2. Очередь задач - Celery.
    3. Bootstrap - для отрисовки кнопок и сообщений на странице.
    4. jQuery для работы с DOM-моделью страницы
    5. selenium для тестирования интерфейса
Версия Python - 3.5.2

Старт приложения
------------------
1. Клонировать репозиторий.
2. Установить пакеты из requirements.txt.
3. В app/celery_run.py изменить настройки запуска Celery:
    1. CELERY_BROKER - параметры брокера сообщений.
    2. CELERY_BACKEND - параметры бэкенда.
4. В app/__init__  задать параметры:
    1. UPLOAD_FOLDER - папка для временного хранения скачиваемых файлов.
    2. SQLALCHEMY_DATABASE_URI - параметры подключения к базе данных.
    3. SQLALCHEMY_MIGRATE_REPO - путь к папке для хранения миграций БД.
5. Для создания таблиц в БД запустить скрипт db_create:
    `python db_create.py`
5. Находясь в папке с проектом, запустить CELERY командой:
    `Путь к папке Scipts в папке используемого интерпретатора PYTHON\celery.exe -A app.celery_run worker -l info --pool=solo`
6. Запусить скрипт `python run.py` для старта приложения
7. Открыть страницу `localhost:5000`

Использование приложения
------------------------
Для загрузки CSV-файла надо либо выбрать в диалоговом окне файл с компьтера, либо ввести в поле ссылку на файл.
Для начала загрузки необходимо нажать кнопку "Загрузить файл". На странице будет отображаться прогресс выполнения задачи.
После завершения задачи будет выведено сообщение о результате выполнения и отобразится кнопка для сброса данных формы и новой загрузки файла.

Тестирование
------------
Для тестирования используется библиотека selenium, библиотека для управления браузером. Для запуска тестов необходим браузер Firefox.
Для запуска тестов надо предварительно запустить Celery и приложение,а затем запустить task.py командой `python task.py`